@model IEnumerable<BDSBanGap.Models.DBContext.Product>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
    int count = 0;
}
<script src="@Url.Content("~/Scripts/table/jquery.dataTables.min.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#example').dataTable();
    });
</script>
<div id="content-header">
	<h1>DANH SÁCH TẤT CẢ NHÀ</h1>
</div>
<div id="breadcrumb">
	<a href="/home" title="Go to Home" class="tip-bottom"><i class="icon-home"></i> TRANG CHỦ</a>
	<a href="/admin" class="current">QUANG LÝ HỆ THỐNG</a>
</div>
    <div class="tbl-Content">
        <div class="title-box">
        </div>
        <!--End title-box-->
        <table id = "example" class="data display datatable">
            <thead>
                <tr class="menu">
                    <th style="width: auto;">STT
                    </th>
                    <th style="width: auto;">Tiêu đề
                    </th>
                    <th style="width: 60px; text-align: center;">Giá
                    </th>
                    <th style="width: 80px; text-align: center;">Phường,Quận
                    </th>
                    <th style="width: 120px; text-align: center;">Loại Địa Ốc
                    </th>
                    <th style="width: 100px; text-align: center;">Vị trí
                    </th>
                    <th style="width: 160px; text-align: center;">Action
                    </th>
                </tr>
            </thead>
            <tbody>
            @foreach (var item in Model)
            {
                <tr class="Items">
                    <td style="width: 60px; text-align: center;">@(++count)
                    </td>
                    <td style="width: auto;font-weight:bold"><a href="/Product/Details/@item.ProductID">@item.Title</a>
                    </td>
                    <td style="width: 80px; text-align: center;">@item.Price Tỷ
                    </td>
                    <td style="width: 120px; text-align: center;">@item.Ward.WardName, @item.Ward.District.DistrictName 
                    </td>
                    <td style="width: 100px; text-align: center;">@BDSBanGap.Models.Enum.LoaiDiaOc.GetLoaiDiaOc(@item.LoaiDiaOc)
                    </td>
                    <td style="width: 160px; text-align: center;">@BDSBanGap.Models.Enum.ViTriDiaOc.GetViTriDiaOc(@item.ViTriDiaOc)
                    </td>
                    <td style="width: 160px; text-align: center;"><a href="/product/edit/@item.ProductID">EDIT</a> | <a>Delete</a>@if (!item.IsCurrentPriority()) {<a id="Priority" onclick="ShowPriorityForm('@item.ProductID')">Priority</a>}
                    </td>
                </tr>
            }
            </tbody>
        </table>

    </div>
<div id="Set-Priority"></div>
   <script type="text/javascript">
    var id;
       $(function () {
           $('#Priority').click(function () {
               $.ajax({
                   url: '/Product/SetPriorityGet',
                   data: { id: id },
                   type: 'POST',
                   success: function (result) {
                       $('#Set-Priority').html(result);
                       $('#Set-Priority').dialog("option", "title", "Thiết lập ưu tiên").dialog("open");
                   }
               });
           });
       });

       $(function () {
           $("#Set-Priority").dialog({
               autoOpen: false, width: 400, height: 220, modal: true,
               buttons: {
                   "Lưu": function () {
                       $.ajax({
                           url: '/Product/SetPriority',
                           data: $("#Priority-Form").serialize(),
                           type: 'POST',
                           success: function (result) {
                               document.location.reload();
                           }
                       });
                   },
                   "Hủy": function () { $(this).dialog("close"); }
               }
           });
       });
       function ShowPriorityForm(idin) {
           id = idin;
           $('#Set-Priority').dialog("option", "title", "Thiết lập ưu tiên").dialog("open");
       }
   </script>

